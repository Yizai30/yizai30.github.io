---
title: æœåŠ¡å™¨ç»´æŠ¤è®°å½•
tags: [Server, Ubuntu]
categories: [Server]
---
# æœåŠ¡å™¨ç»´æŠ¤å†ç¨‹æ–‡æ¡£

## æ¦‚è¿°
æœ¬æ–‡æ¡£è®°å½•äº†2025å¹´12æœˆ11æ—¥è‡³12æœˆ22æ—¥æœŸé—´ï¼ŒæœåŠ¡å™¨ä»å‡ºç°æ•…éšœåˆ°å®Œå…¨ä¿®å¤çš„å®Œæ•´è¿‡ç¨‹ã€‚ä¸»è¦é—®é¢˜åŒ…æ‹¬ç³»ç»Ÿå¯åŠ¨å¤±è´¥ã€æ–‡ä»¶ç³»ç»ŸæŒ‚è½½é”™è¯¯ã€systemdæœåŠ¡æ•…éšœï¼Œæœ€ç»ˆé€šè¿‡ç³»ç»Ÿé‡è£…å’Œæ•°æ®æ¢å¤è§£å†³äº†æ‰€æœ‰é—®é¢˜ã€‚

## æ—¶é—´çº¿

### ç¬¬é›¶é˜¶æ®µï¼šç¡¬ä»¶æ•…éšœä¿®å¤ï¼ˆ12æœˆ10æ—¥ï¼‰
**é—®é¢˜èƒŒæ™¯**:
åœ¨å¼€å§‹æ’æŸ¥è½¯ä»¶é—®é¢˜ä¹‹å‰ï¼ŒæœåŠ¡å™¨å‡ºç°äº†ä¸¥é‡çš„ç¡¬ä»¶æ•…éšœï¼Œå¯¼è‡´ç³»ç»Ÿæ— æ³•ç¨³å®šè¿è¡Œã€‚

**å…³é”®å‘ç°ï¼šCPUè¿‡çƒ­æ•…éšœ**
- ç³»ç»Ÿå¯åŠ¨æ—¶æ˜¾ç¤ºCPUè¿‡çƒ­è­¦å‘Š
- æœåŠ¡å™¨åœ¨é«˜è´Ÿè½½ä¸‹çªç„¶æ–­ç”µä¿æŠ¤
- ç³»ç»Ÿè¿è¡Œæä¸ç¨³å®šï¼Œæ— æ³•è¿›è¡Œä»»ä½•æœ‰æ•ˆçš„è¯Šæ–­å·¥ä½œ

#### ç¡¬ä»¶ç»´ä¿®è¿‡ç¨‹

**ç¬¬ä¸€æ­¥ï¼šCPUç¡…è„‚é‡æ¶‚**
- å…³é—­æœåŠ¡å™¨ç”µæºï¼Œæ–­å¼€æ‰€æœ‰å¤–éƒ¨è¿æ¥
- æ‹†å¸CPUæ•£çƒ­å™¨ï¼Œå‘ç°æ—§ç¡…è„‚å·²å¹²æ¶¸å¤±æ•ˆ
- å½»åº•æ¸…ç†CPUå’Œæ•£çƒ­å™¨è¡¨é¢
- é‡æ–°æ¶‚æŠ¹é«˜è´¨é‡å¯¼çƒ­ç¡…è„‚ï¼Œç¡®ä¿å‡åŒ€è¦†ç›–
- é‡æ–°å®‰è£…æ•£çƒ­å™¨ï¼Œè°ƒæ•´åˆ°é€‚å½“å‹åŠ›

**ç¬¬äºŒæ­¥ï¼šæ°´å†·ç³»ç»Ÿæ•…éšœè¯Šæ–­**
- è¯·äººå¸®å¿™æ£€æŸ¥åŸæ°´å†·ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
- å‘ç°æ°´æ³µä¸å·¥ä½œï¼Œå†·å´æ¶²å¾ªç¯å¼‚å¸¸
- ç¡®è®¤æ•£çƒ­æ•ˆç‡ä¸¥é‡ä¸‹é™ï¼Œå¿…é¡»æ›´æ¢

**ç¬¬ä¸‰æ­¥ï¼šæ›´æ¢å…¨æ–°æ°´å†·ç³»ç»Ÿ**
- é‡‡ç”¨ç»´ä¿®åº—ç°è´§ç“¦å°”åŸºé‡Œæ°´å†·
- å®Œå…¨æ‹†å¸æ•…éšœçš„æ—§æ°´å†·è®¾å¤‡
- å®‰è£…æ–°çš„æ°´å†·ç³»ç»Ÿï¼Œé‡æ–°å¸ƒç½®å†·å´ç®¡è·¯
- ç¡®ä¿æ•£çƒ­ç‰‡ä¸CPUè¡¨é¢æ¥è§¦è‰¯å¥½ï¼Œæ°´å†·æ³µå·¥ä½œæ­£å¸¸
![ç“¦å°”åŸºé‡Œæ°´å†·è£…ç½®](/images/2025-12-23-æœåŠ¡å™¨ç»´æŠ¤è®°å½•/688bcd005c32a0a94d72bf52cc5bf785.jpg)
_ç“¦å°”åŸºé‡Œæ°´å†·è£…ç½®_

#### ç¡¬ä»¶ä¿®å¤æ•ˆæœ
**æ¸©åº¦æ”¹å–„**:
- ä¿®å¤å‰ï¼šCPUç©ºé—²æ¸©åº¦è¶…è¿‡é«˜æ¸©è­¦æˆ’ï¼Œâ‰¥80Â°Cï¼ˆç³»ç»Ÿä¼šå‘å‡ºè­¦å‘Šï¼Œéœ€è¦ç«‹å³å¤„ç†ï¼‰ï¼Œè´Ÿè½½æ—¶ç”šè‡³åˆ°è¾¾100Â°Cï¼ˆç³»ç»Ÿä¼šå¼ºåˆ¶ä¿æŠ¤ï¼Œå¯èƒ½å¯¼è‡´æ–­ç”µï¼‰
- ä¿®å¤åï¼šCPUç©ºé—²æ¸©åº¦çº¦ä¸º35Â°Cï¼ˆå®‰å…¨èŒƒå›´ï¼Œæ­£å¸¸è¿è¡Œï¼‰

**ç³»ç»Ÿç¨³å®šæ€§æå‡**:
- å½»åº•æ¶ˆé™¤äº†å› è¿‡çƒ­å¯¼è‡´çš„çªç„¶æ–­ç”µé—®é¢˜
- ç³»ç»Ÿå¯ä»¥é•¿æ—¶é—´ç¨³å®šè¿è¡Œ
- ä¸ºåç»­çš„è½¯ä»¶å±‚é¢æ•…éšœæ’æŸ¥å’Œä¿®å¤æä¾›äº†å¿…è¦çš„ç¡¬ä»¶åŸºç¡€

**é‡è¦æ€§è¯´æ˜**:
è¿™ä¸€é˜¶æ®µçš„ç¡¬ä»¶ä¿®å¤æ˜¯æ•´ä¸ªç»´ä¿®è¿‡ç¨‹çš„åŸºç¡€ã€‚åªæœ‰è§£å†³äº†CPUè¿‡çƒ­é—®é¢˜ï¼Œç¡®ä¿ç³»ç»Ÿä¸å†å› ç¡¬ä»¶æ•…éšœè€Œæ–­ç”µï¼Œæ‰èƒ½è¿›è¡Œåç»­çš„è½¯ä»¶æ•…éšœè¯Šæ–­å’Œæ•°æ®æ¢å¤å·¥ä½œã€‚å¦‚æœç¡¬ä»¶é—®é¢˜æœªè§£å†³ï¼Œä»»ä½•è½¯ä»¶å±‚é¢çš„ä¿®å¤å°è¯•éƒ½æ— æ³•æœ‰æ•ˆè¿›è¡Œã€‚

### ç¬¬ä¸€é˜¶æ®µï¼šåˆæœŸé—®é¢˜å‘ç°ï¼ˆ12æœˆ11æ—¥ï¼‰
**æ–‡ä»¶**: `ä¿®å¤netstatæ— è¾“å‡ºä¸53ç«¯å£è§£æå¤±è´¥-20251211172116.txt`

**å…³é”®é—®é¢˜**:
- netstatå‘½ä»¤æ— è¾“å‡º
- 53ç«¯å£DNSè§£æå¤±è´¥
- ç³»ç»Ÿç½‘ç»œè¿æ¥å¼‚å¸¸

**åˆæ­¥è¯Šæ–­**:
- ç³»ç»ŸåŸºç¡€ç½‘ç»œå †æ ˆå‡ºç°é—®é¢˜
- å¯èƒ½å­˜åœ¨ç³»ç»ŸæœåŠ¡å¼‚å¸¸

### ç¬¬äºŒé˜¶æ®µï¼šç³»ç»Ÿç´§æ€¥æ¨¡å¼ï¼ˆ12æœˆ13æ—¥ï¼‰
**æ–‡ä»¶**: `ä¿®å¤ç³»ç»Ÿç´§æ€¥æ¨¡å¼åªè¯»æ–‡ä»¶ç³»ç»Ÿé—®é¢˜-20251213125009.txt`

**é—®é¢˜å‡çº§**:
- ç³»ç»Ÿå¯åŠ¨è¿›å…¥ç´§æ€¥æ¨¡å¼ï¼ˆEmergency Modeï¼‰
- æ ¹æ–‡ä»¶ç³»ç»Ÿå˜ä¸ºåªè¯»çŠ¶æ€
- æ— æ³•æ­£å¸¸æ‰§è¡Œç³»ç»Ÿç®¡ç†å‘½ä»¤

**è§£å†³å°è¯•**:
- ä½¿ç”¨Live USBå¯åŠ¨ç›˜è¿›è¡Œç³»ç»Ÿæ¢å¤
- å°è¯•æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥å’Œä¿®å¤
- åˆ†æ/etc/fstabé…ç½®æ–‡ä»¶

### ç¬¬ä¸‰é˜¶æ®µï¼šæ¢å¤å·¥å…·å‡†å¤‡ï¼ˆ12æœˆ13æ—¥ï¼‰
**æ–‡ä»¶**: `Ubuntu Uç›˜å¯åŠ¨ç›˜åˆ¶ä½œä¸ä½¿ç”¨æŒ‡å—-20251213143505.txt`

**è§£å†³æ–¹æ¡ˆ**:
- åˆ¶ä½œUbuntu Live USBå¯åŠ¨ç›˜
- ä½¿ç”¨Liveç¯å¢ƒè¿›è¡Œç³»ç»Ÿè¯Šæ–­å’Œä¿®å¤
- å»ºç«‹ä¸´æ—¶å·¥ä½œç¯å¢ƒè¿›è¡Œæ•°æ®æŠ¢æ•‘

### ç¬¬å››é˜¶æ®µï¼šå­˜å‚¨è®¾å¤‡æ£€æŸ¥ï¼ˆ12æœˆ15æ—¥ï¼‰
**æ–‡ä»¶**: `NVMeç¡¬ç›˜åªè¯»é—®é¢˜è§£å†³æŒ‡å—-20251215215138.txt`

**å­˜å‚¨è®¾å¤‡æ£€æŸ¥**:
- ç¡¬ä»¶æ•…éšœå·²åœ¨ç¬¬é›¶é˜¶æ®µæ’é™¤ï¼Œé‡ç‚¹å…³æ³¨å­˜å‚¨è®¾å¤‡
- NVMeç¡¬ç›˜çŠ¶æ€æ£€æŸ¥
- æ’é™¤ç£ç›˜ç‰©ç†æ•…éšœå¯èƒ½æ€§

**æ–‡ä»¶**: `Ubuntuä¸‹è¿›è¡ŒSMARTæµ‹è¯•å®Œæ•´æŒ‡å—-20251216164524.txt`

**è¯Šæ–­ç»“æœ**:
- NVMeç¡¬ç›˜S.M.A.R.T.çŠ¶æ€æ­£å¸¸ï¼Œæ— ç‰©ç†åé“
- ç¡¬ä»¶å±‚é¢å®Œå…¨å¥åº·
- ç¡®è®¤é—®é¢˜é›†ä¸­åœ¨ç³»ç»Ÿè½¯ä»¶å±‚é¢

### ç¬¬äº”é˜¶æ®µï¼šå¯åŠ¨å¤±è´¥åˆ†æï¼ˆ12æœˆ16æ—¥ï¼‰
**æ–‡ä»¶**: `è§£å†³Ubuntuå¯åŠ¨æŠ¥é”™ï¼šæŒ‚è½½å•å…ƒå¤±è´¥é—®é¢˜-20251216181300.txt`

**æ ¸å¿ƒé—®é¢˜**:
```
[FAILED] Failed to mount Huge Pages File System
[FAILED] Failed to mount POSIX Message Queue File System
[FAILED] Failed to mount Kernel Debug File System
[FAILED] Failed to mount Kernel Trace File System
[FAILED] Failed to mount FUSE Control File System
[FAILED] Failed to mount Kernel Configuration File System
```

**åˆ†æç»“è®º**:
- 35ä¸ªsystemdå•å…ƒå¯åŠ¨å¤±è´¥
- æ–‡ä»¶ç³»ç»ŸæŒ‚è½½é…ç½®å­˜åœ¨ä¸¥é‡é—®é¢˜
- ç³»ç»ŸæœåŠ¡ä¾èµ–å…³ç³»æ··ä¹±

### ç¬¬å…­é˜¶æ®µï¼šç³»ç»Ÿé…ç½®ä¿®å¤å°è¯•ï¼ˆ12æœˆ17æ—¥ï¼‰
**æ–‡ä»¶**: `ä¿®æ”¹ç¡¬ç›˜é”™è¯¯å‚æ•°ï¼šå‰¯ä½œç”¨ä¸é£é™©åˆ†æ-20251217121847.txt`

**ä¿®å¤å°è¯•**:
- ä¿®æ”¹/etc/fstabæŒ‚è½½å‚æ•°
- è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿé”™è¯¯å¤„ç†ç­–ç•¥
- å°è¯•æ¢å¤ç³»ç»Ÿè¯»å†™æƒé™

**é‡åˆ°çš„é—®é¢˜**:
- å‘½ä»¤æ‰§è¡Œè¢«"åæ‰"ï¼ˆæ— å“åº”ï¼‰
- dmesgæ—¥å¿—æ— æ³•æŸ¥çœ‹
- ç³»ç»ŸçŠ¶æ€ä¸ç¨³å®š

### ç¬¬ä¸ƒé˜¶æ®µï¼šæ ¹æœ¬åŸå› å‘ç°ï¼ˆ12æœˆ17æ—¥ï¼‰
**æ–‡ä»¶**: `df-20251217153548.txt` å’Œ `chat-System Issue With Conda Interference.txt`

**å…³é”®å‘ç°**:
- Condaç¯å¢ƒå¹²æ‰°ç³»ç»ŸPATHå˜é‡
- GRUBé…ç½®æ›´æ–°å¤±è´¥
- ç³»ç»Ÿå·¥å…·æ‰§è¡Œå¼‚å¸¸

**æ ¸å¿ƒæŠ€æœ¯é—®é¢˜**:
1. **Conda PATHæ±¡æŸ“**: ç³»ç»ŸPATHä¸­åŒ…å«Condaè·¯å¾„ï¼Œå¯¼è‡´ç³»ç»Ÿå·¥å…·æ‰¾åˆ°é”™è¯¯çš„æ‰§è¡Œæ–‡ä»¶
2. **GRUBæ›´æ–°å¤±è´¥**: update-grubå‘½ä»¤æ— æ³•æ­£å¸¸æ‰§è¡Œ
3. **ç³»ç»Ÿç¯å¢ƒç ´å**: Condaç¯å¢ƒå˜é‡å½±å“äº†ç³»ç»Ÿçº§æ“ä½œ

## æœ€ç»ˆè§£å†³æ–¹æ¡ˆ

### 1. ç³»ç»Ÿé‡è£…å†³ç­–
ç»è¿‡å¤šæ¬¡å°è¯•ä¿®å¤å¤±è´¥åï¼Œå†³å®šè¿›è¡Œç³»ç»Ÿé‡è£…ï¼š
- æ•°æ®å·²é€šè¿‡Live USBç¯å¢ƒå¤‡ä»½
- ç³»ç»Ÿæ–‡ä»¶æŸåä¸¥é‡ï¼Œä¿®å¤æˆæœ¬è¿‡é«˜
- é‡è£…æ˜¯ fastest path to recovery

### 2. æ•°æ®æ¢å¤ç­–ç•¥
**ç”¨æˆ·å’Œç»„ç®¡ç†**:

#### 2.1 å…³é”®æ­¥éª¤å›é¡¾
| æ­¥éª¤ | æ“ä½œ | å‘½ä»¤ç¤ºä¾‹ |
|------|------|---------|    
| 1 | æŒ‚è½½å¤–ç½®ç¡¬ç›˜ | `sudo mount /dev/sdb1 /mnt/backup` |
| 2 | åˆ†æå¤‡ä»½ç”¨æˆ· | `awk -F: '$3 >= 1000 {print $1, $3}' /mnt/backup/etc/passwd` |         
| 3 | ä¿®æ”¹å†²çªUID | `awk -F: 'BEGIN{OFS=":"} $1 == "gpuserver1106" { $3 = 1010; $4 = 1010 } 1' /mnt/backup/etc/passwd > /tmp/passwd.fixed` |                  
| 4 | æ¢å¤ç”¨æˆ·è´¦æˆ· | `sudo cat /tmp/passwd.fixed \| sudo tee -a /etc/passwd` |                   
| 5 | æ¢å¤å¯†ç ä¿¡æ¯ | `sudo cat /tmp/shadow.fixed \| sudo tee -a /etc/shadow` |     
| 6 | æ¢å¤homeç›®å½• | `sudo rsync -aAXHvh /mnt/backup/home/ /home/` |                                     
| 7 | ä¿®å¤æ–‡ä»¶æ‰€æœ‰æƒ | `sudo chown -R 1010:1010 /home/gpuserver1106` |                               
| 8 | æ¸…ç†é‡å¤æ¡ç›® | `sudo vipw` åˆ é™¤é‡å¤çš„ç”¨æˆ·æ¡ç›® |  
| 9 | éªŒè¯ | `id gpuserver1106` |             
| 10 | æµ‹è¯•ç™»å½• | `su - gpuserver1106` |                                                                                        
#### 2.2 å…³é”®æ³¨æ„äº‹é¡¹     
1. **UIDå”¯ä¸€æ€§**ï¼šç¡®ä¿æ¯ä¸ªç”¨æˆ·çš„UIDåœ¨ç³»ç»Ÿä¸­æ˜¯å”¯ä¸€çš„      
2. **å¤‡ä»½å…ˆè¡Œ**ï¼šä¿®æ”¹ä»»ä½•ç³»ç»Ÿæ–‡ä»¶å‰å…ˆå¤‡ä»½ 
3. **å®‰å…¨ç¼–è¾‘**ï¼šä½¿ç”¨ `vipw` å’Œ `vipw -s` ç¼–è¾‘ç”¨æˆ·æ–‡ä»¶     
4. **å¯†ç ä¿æŒ**ï¼šæ¢å¤shadowæ–‡ä»¶å³å¯ä¿ç•™åŸå¯†ç         
5. **æƒé™å®Œæ•´**ï¼šæ¢å¤ç”¨æˆ·ç»„ä»¥ç¡®ä¿æ­£ç¡®çš„è®¿é—®æƒé™  

#### 2.3 é‡åˆ°çš„é—®é¢˜å’Œè§£å†³         
                      
| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ³• |       
|------|------|---------|       
| `id gpuserver1106` æ˜¾ç¤ºubuntuç”¨æˆ· | ç”¨æˆ·æ¡ç›®é‡å¤ | ä½¿ç”¨vipwåˆ é™¤UID 1000çš„æ¡ç›® |           
| æ–‡ä»¶æ‰€æœ‰æƒé”™è¯¯ | UIDä»1000æ”¹ä¸º1010åæœªæ›´æ–° | `chown -R 1010:1010 /home/gpuserver1106` |     
| æ— æ³•ç™»å½• | shadowæ–‡ä»¶æœªæ¢å¤æˆ–æ¡ç›®é‡å¤ | åŒæ­¥shadowæ–‡ä»¶ï¼Œåˆ é™¤é‡å¤æ¡ç›® |  
                      
#### 2.4 ç³»ç»Ÿç”¨æˆ·æ£€æŸ¥  
```bash 
# æ£€æŸ¥æ‰€æœ‰ç”¨æˆ·  
awk -F: '$3 >= 1000 {print $1, $3, $6}' /etc/passwd 
``` 
#### 2.5 å¤šç”¨æˆ·çŠ¶æ€  
æ¢å¤åç³»ç»ŸåŒ…å«ä»¥ä¸‹ç”¨æˆ·ï¼š  
- ubuntu (UID 1000) - æ–°ç³»ç»Ÿå®‰è£…æ—¶åˆ›å»º    
- gpuserver1106 (UID 1010) - ä»å¤‡ä»½æ¢å¤      
- testuser (UID 1001) - ä»å¤‡ä»½æ¢å¤    
- chenshi (UID 1002) - ä»å¤‡ä»½æ¢å¤   
- liyizhe (UID 1003) - ä»å¤‡ä»½æ¢å¤  
- ekay (UID 1004) - ä»å¤‡ä»½æ¢å¤  
- hammer (UID 1005) - ä»å¤‡ä»½æ¢å¤  
- ssg (UID 1006) - ä»å¤‡ä»½æ¢å¤  
- Meowww (UID 1007) - ä»å¤‡ä»½æ¢å¤  
- czh (UID 1008) - ä»å¤‡ä»½æ¢å¤ 

#### 2.6 ç™»å½•æµ‹è¯•     
æ‰€æœ‰ç”¨æˆ·åº”è¯¥èƒ½å¤Ÿï¼š 
- ä½¿ç”¨åŸå¯†ç ç™»å½•ç³»ç»Ÿ   
- è®¿é—®å„è‡ªçš„homeç›®å½•    
- æ‹¥æœ‰ç›¸åº”çš„æƒé™ï¼ˆsudoã€dockerç­‰ï¼‰

**å…³é”®æ•°æ®ç›®å½•**:
  1. ç”¨æˆ·æ•°æ®ç›®å½•

  - /home/ - ç”¨æˆ·æ•°æ®
    - ç”¨æˆ·æ–‡æ¡£ã€ä»£ç ã€é…ç½®æ–‡ä»¶
    - SSHå¯†é’¥
    - ä¸ªäººç¯å¢ƒé…ç½®

  2. ç³»ç»Ÿé…ç½®ç›®å½•ï¼ˆé€‰æ‹©æ€§æ¢å¤ï¼‰

  - /etc/ssh/ - SSHé…ç½®ï¼ˆæœªæ¢å¤ï¼‰
    - SSHä¸»æœºå¯†é’¥ï¼ˆé¿å…å®¢æˆ·ç«¯"WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED"è­¦å‘Šï¼‰
    - sshd_configé…ç½®æ–‡ä»¶
    - ç”±äºæœªæ¢å¤ï¼Œç”¨æˆ·åœ¨å®¢æˆ·ç«¯éœ€è¦æ‰§è¡Œ ssh-keygen -R "[139.224.239.149]:10090" åˆ é™¤æ—§çš„æœåŠ¡å™¨å¯†é’¥
  - /etc/netplan/ - ç½‘ç»œé…ç½®ï¼ˆæœªæ¢å¤ï¼‰
    - é™æ€IPé…ç½®
    - ç½‘ç»œæ¥å£è®¾ç½®
  - /etc/cron.d/ - å®šæ—¶ä»»åŠ¡ï¼ˆæœªæ¢å¤ï¼‰
    - è‡ªå®šä¹‰cronä»»åŠ¡
  - /etc/crontab - ç³»ç»Ÿçº§å®šæ—¶ä»»åŠ¡ï¼ˆæœªæ¢å¤ï¼‰
  - /etc/systemd/system/ - è‡ªå®šä¹‰systemdæœåŠ¡ï¼ˆæœªæ¢å¤ï¼‰
    - ç”¨æˆ·åˆ›å»ºçš„æœåŠ¡å•å…ƒæ–‡ä»¶

  3. æœåŠ¡æ•°æ®ç›®å½•

  - /var/www/ - WebæœåŠ¡æ•°æ®ï¼ˆä¸å­˜åœ¨ï¼‰
    - ç½‘ç«™æ–‡ä»¶
    - Webåº”ç”¨æ•°æ®
  - /var/lib/mysql/ - MySQLæ•°æ®åº“æ•°æ®ï¼ˆä¸å­˜åœ¨ï¼‰
    - æ•°æ®åº“æ–‡ä»¶
    - å¦‚æœè¿è¡Œæ•°æ®åº“æœåŠ¡

  4. åº”ç”¨ç¨‹åºæ•°æ®

  - /opt/ - è‡ªå®šä¹‰åº”ç”¨ç¨‹åº
    - frp
    - miniconda
  - /srv/ - æœåŠ¡æ•°æ®ï¼ˆä¸å­˜åœ¨ï¼‰
    - é¢å¤–çš„æœåŠ¡æ•°æ®ç›®å½•

  5. ç”¨æˆ·è´¦æˆ·ä¿¡æ¯ï¼ˆç‰¹æ®Šå¤„ç†ï¼‰

  éœ€è¦æ‰‹åŠ¨å¤„ç†ï¼Œä¸èƒ½ç›´æ¥æ¢å¤ï¼šï¼ˆæ‰‹åŠ¨å¤„ç†å’Œé‡è£…ç³»ç»Ÿåä¸æ–°ç”¨æˆ·ubuntuä¹‹é—´çš„å†²çªï¼‰
  - /etc/passwd - ç”¨æˆ·è´¦æˆ·ä¿¡æ¯
  - /etc/shadow - ç”¨æˆ·å¯†ç ä¿¡æ¯
  - /etc/group - ç”¨æˆ·ç»„ä¿¡æ¯

  å¤„ç†æ–¹æ³•ï¼š
  - æå–UID â‰¥ 1000çš„ç”¨æˆ·
  - æ£€æŸ¥å¹¶è§£å†³UIDå†²çªï¼ˆå¦‚gpuserver1106ç”¨æˆ·ä»UID 1000æ”¹ä¸º1010ï¼‰
  - ä½¿ç”¨awkç­‰å·¥å…·é€‰æ‹©æ€§è¿½åŠ ï¼Œé¿å…è¦†ç›–æ–°ç³»ç»Ÿç”¨æˆ·

  6. å¤‡ä»½çš„å…¶ä»–æœ‰ç”¨æ–‡ä»¶

  - /var/log/apt/history.log - å·²å®‰è£…è½¯ä»¶åŒ…åˆ—è¡¨ï¼ˆæœªæ¢å¤ï¼‰
  - /root/ - rootç”¨æˆ·çš„é…ç½®å’Œæ•°æ®ï¼ˆæœªæ¢å¤ï¼‰

  âš ï¸ ä¸åº”æ¢å¤çš„ç›®å½•

  ä¿®å¤è®°å½•ä¸­æ˜ç¡®æŒ‡å‡ºä»¥ä¸‹ç›®å½•ä¸åº”æ¢å¤ï¼š
  - /etc/passwdã€/etc/shadowã€/etc/group - ç”¨æˆ·è´¦æˆ·ä¿¡æ¯
  - /etc/fstab - æ–‡ä»¶ç³»ç»ŸæŒ‚è½½é…ç½®
  - æ•´ä¸ª/etcç›®å½• - ä¸èƒ½ç›²ç›®æ¢å¤æ•´ä¸ª/etcï¼Œä¼šç ´åæ–°ç³»ç»Ÿ

  å¤‡ä»½å‘½ä»¤

  ä¿®å¤ä¸­ä½¿ç”¨çš„å¤‡ä»½å‘½ä»¤ï¼š
  sudo rsync -aAXHvh --progress /mnt/myroot/ /path/to/external_hard_drive/

  è¿™ä¸ªå‘½ä»¤å¤‡ä»½äº†æ•´ä¸ªç³»ç»Ÿï¼ŒåŒ…æ‹¬æ‰€æœ‰å…³é”®æ•°æ®ç›®å½•ï¼Œä¿ç•™äº†æƒé™ã€æ‰€æœ‰æƒã€ACLsã€æ‰©å±•å±æ€§å’Œç¡¬é“¾æ¥ã€‚
  ä¿®å¤åï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤è¿›è¡Œæ¢å¤ï¼š
  sudo rsync -aAXHvh --progress /path/to/external_hard_drive/target_path/ /target_path/

### 3. ç³»ç»Ÿä¼˜åŒ–é…ç½®
**ç¡¬ä»¶é…ç½®**:
- NVIDIA RTX 4090 x 2 GPUé…ç½®
- æ°´å†·æ•£çƒ­ç³»ç»Ÿ

**è½¯ä»¶ç¯å¢ƒ**:
- å…¨å±€nvccç¯å¢ƒ
- å¤šç”¨æˆ·minicondaç¯å¢ƒ
- ä½¿ç”¨dockerç¯å¢ƒéš”ç¦»æŠ€æœ¯
- external hard diskå¤‡ä»½ç³»ç»Ÿæ•°æ®
- sensorså·¥å…·æ£€æŸ¥CPUæ¸©åº¦

## æŠ€æœ¯è¦ç‚¹æ€»ç»“

### Condaå¹²æ‰°é—®é¢˜çš„æŠ€æœ¯ç»†èŠ‚

**é—®é¢˜æœºç†**:
```bash
# é”™è¯¯çš„PATHé…ç½®ç¤ºä¾‹ï¼Œåœ¨/etc/environmentä¸­é…ç½®cudaï¼Œéœ€è¦å†™æ­»è·¯å¾„
PATH="/opt/cuda_toolkit_env/bin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin"
LD_LIBRARY_PATH="/opt/cuda_toolkit_env/lib64"
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# åœ¨ /etc/profile.d ä¸­ä½¿ç”¨ cuda.sh å’Œ conda.sh åœ¨å¤šç”¨æˆ·ç™»å½•æ—¶è‡ªåŠ¨é…ç½®ç¯å¢ƒ
source /etc/profile.d/cuda.sh
source /etc/profile.d/conda.sh
# åœ¨ /etc/ld.so.conf.d ä¸­æ·»åŠ  cuda.confï¼Œåˆ™ä¸éœ€è¦é…ç½® LD_LIBRARY_PATH
echo "/usr/local/cuda/lib64" > /etc/ld.so.conf.d/cuda.conf
```

### ç³»ç»Ÿæ¢å¤æœ€ä½³å®è·µ

1. **ç¯å¢ƒéš”ç¦»**: é‡è¦ç³»ç»Ÿæ“ä½œåº”ä½¿ç”¨å¹²å‡€çš„ç¯å¢ƒå˜é‡
2. **PATHç®¡ç†**: é¿å…å¼€å‘å·¥å…·æ±¡æŸ“ç³»ç»ŸPATH
3. **å¤‡ä»½ç­–ç•¥**: å®šæœŸå¤‡ä»½å…³é”®é…ç½®å’Œæ•°æ®
4. **ç›‘æ§æœºåˆ¶**: å»ºç«‹ç³»ç»Ÿå¥åº·ç›‘æ§

### æ•…éšœè¯Šæ–­å·¥å…·

**ç¡¬ä»¶è¯Šæ–­**:
- `smartctl` - ç¡¬ç›˜S.M.A.R.T.æ£€æµ‹
- `memtest86+` - å†…å­˜æµ‹è¯•ï¼ˆæœªä½¿ç”¨ï¼‰
- `stress` - ç³»ç»Ÿå‹åŠ›æµ‹è¯•ï¼ˆæœªä½¿ç”¨ï¼‰

**è½¯ä»¶è¯Šæ–­**:
- `journalctl` - ç³»ç»Ÿæ—¥å¿—åˆ†æ
- `systemctl` - æœåŠ¡çŠ¶æ€æ£€æŸ¥
- `fsck` - æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥

## ç»éªŒæ•™è®­

### 1. ç¯å¢ƒç®¡ç†çš„é‡è¦æ€§
- å¯¹äºå¤šç”¨æˆ·ä½¿ç”¨mincondaï¼Œå¼€å‘ç¯å¢ƒåº”ä¸ç³»ç»Ÿç¯å¢ƒä¸¥æ ¼åˆ†ç¦»

### 2. ç³»ç»Ÿç»´æŠ¤ç­–ç•¥
- å®šæœŸè¿›è¡Œç³»ç»Ÿå¥åº·æ£€æŸ¥ï¼ŒåŒ…æ‹¬ç¡¬ä»¶å’Œè½¯ä»¶
- ä¿æŒç³»ç»Ÿæ›´æ–°ï¼Œä½†ä¸ç›²ç›®æ›´æ–°
- ç»´æŠ¤è¯¦ç»†çš„ç³»ç»Ÿé…ç½®æ–‡æ¡£

### 3. æ•…éšœå“åº”æµç¨‹
- åŠæ—¶å¤‡ä»½æ•°æ®é˜²æ­¢è¿›ä¸€æ­¥æŸå¤±
- é‡‡ç”¨æ¸è¿›å¼é—®é¢˜æ’æŸ¥æ–¹æ³•
- å¿…è¦æ—¶é€‰æ‹©é‡è£…è€Œéç›²ç›®ä¿®å¤

## ç»“è®º

æœ¬æ¬¡æœåŠ¡å™¨ç»´ä¿®è¿‡ç¨‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ•…éšœæ’é™¤æ¡ˆä¾‹ï¼Œå±•ç°äº†ä»ç¡¬ä»¶ä¿®å¤åˆ°è½¯ä»¶é‡æ„çš„ç³»ç»ŸåŒ–è§£å†³æ–¹æ¡ˆã€‚

### ç»´ä¿®è¿‡ç¨‹çš„å…³é”®é¡ºåº
1. **ç¬¬é›¶é˜¶æ®µ - ç¡¬ä»¶ä¿®å¤**: é€šè¿‡é‡æ¶‚CPUç¡…è„‚å’Œæ›´æ¢æ•…éšœæ°´å†·ç³»ç»Ÿï¼Œè§£å†³äº†CPUè¿‡çƒ­å¯¼è‡´çš„ç³»ç»Ÿæ–­ç”µé—®é¢˜ï¼Œä¸ºåç»­å·¥ä½œå¥ å®šäº†ç¨³å®šçš„ç¡¬ä»¶åŸºç¡€
2. **ç¬¬ä¸€é˜¶æ®µè‡³ç¬¬ä¸ƒé˜¶æ®µ - è½¯ä»¶æ•…éšœæ’æŸ¥**: ç³»ç»Ÿæ€§åœ°è¯Šæ–­å’Œå°è¯•ä¿®å¤å„ç§è½¯ä»¶å±‚é¢çš„é—®é¢˜
3. **æœ€ç»ˆè§£å†³**: è¯†åˆ«å‡ºCondaç¯å¢ƒå¹²æ‰°ã€systemctlæœåŠ¡å¯åŠ¨å¤±è´¥ã€å¤šä¸ªæ–‡ä»¶æŒ‚è½½ç‚¹æŒ‚åœ¨å¤±è´¥ç­‰éš¾ä»¥ä¿®å¤çš„è½¯ä»¶é—®é¢˜ï¼Œé€šè¿‡ç³»ç»Ÿé‡è£…å’Œæ•°æ®æ¢å¤å½»åº•è§£å†³é—®é¢˜

### å…³é”®æˆåŠŸå› ç´ 
- **æ­£ç¡®çš„æ•…éšœæ’æŸ¥é¡ºåº**: å…ˆç¡¬ä»¶åè½¯ä»¶ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œæ˜¯è¿›è¡Œè½¯ä»¶ä¿®å¤çš„å‰æ
- **å½»åº•çš„ç¡¬ä»¶ä¿®å¤**: CPUè¿‡çƒ­é—®é¢˜çš„è§£å†³ä½¿ç³»ç»Ÿèƒ½å¤Ÿé•¿æ—¶é—´ç¨³å®šè¿è¡Œï¼Œä¸ºè½¯ä»¶è¯Šæ–­åˆ›é€ æ¡ä»¶
- **ç³»ç»ŸåŒ–çš„æ–¹æ³•**: ä»ç®€å•åˆ°å¤æ‚ï¼Œä»å¤–éƒ¨åˆ°å†…éƒ¨çš„æ¸è¿›å¼æ’æŸ¥
- **æœæ–­çš„å†³ç­–**: åœ¨ä¿®å¤æˆæœ¬è¿‡é«˜æ—¶ï¼ŒåŠæ—¶é€‰æ‹©é‡è£…ç³»ç»Ÿ

æ­¤æ¬¡ç»´ä¿®è¿‡ç¨‹ä¸ºä»Šåçš„ç³»ç»Ÿç®¡ç†æä¾›äº†å®è´µçš„ç»éªŒï¼š
1. **ç¡¬ä»¶ç¨³å®šæ€§æ˜¯åŸºç¡€**: åœ¨æ’æŸ¥è½¯ä»¶é—®é¢˜å‰ï¼Œå¿…é¡»ç¡®ä¿ç¡¬ä»¶ç³»ç»Ÿå·¥ä½œæ­£å¸¸
2. **ä¸¥æ ¼çš„ç¯å¢ƒåˆ†ç¦»**: å¼€å‘ç¯å¢ƒï¼ˆå¦‚Condaï¼‰åº”ä¸ç³»ç»Ÿç¯å¢ƒä¸¥æ ¼åˆ†ç¦»ï¼Œé¿å…PATHæ±¡æŸ“
3. **å¤‡ä»½**: å®šæœŸå¤‡ä»½å…³é”®é…ç½®å’Œæ•°æ®æ˜¯æ•°æ®å®‰å…¨çš„ä¿éšœ
4. **æ¸©åº¦æ£€æŸ¥**: å¯ä»¥ä½¿ç”¨sensorsæ£€æŸ¥ç¡¬ä»¶æ¸©åº¦ï¼ŒåŠæ—¶å‘ç°è¿‡çƒ­é—®é¢˜

æœåŠ¡å™¨ç°å·²æ¢å¤æ­£å¸¸è¿è¡Œï¼Œç¡¬ä»¶æ¸©åº¦å¾—åˆ°æœ‰æ•ˆæ§åˆ¶ï¼Œè½¯ä»¶ç¯å¢ƒé…ç½®è§„èŒƒï¼Œéœ€æ—¶å¸¸ç›‘æ§å’Œæ£€æŸ¥æœåŠ¡å™¨çš„å¥åº·çŠ¶æ€ï¼Œä»¥é¢„é˜²ç±»ä¼¼é—®é¢˜çš„å†æ¬¡å‘ç”Ÿã€‚

---
*æ–‡æ¡£ç”Ÿæˆæ—¶é—´: 2025å¹´12æœˆ22æ—¥*
*æ–‡æ¡£äººä¸ºç¼–è¾‘æ—¶é—´ï¼š2025å¹´12æœˆ23æ—¥*
*ç»´ä¿®å‘¨æœŸ: 2025å¹´12æœˆ11æ—¥ - 12æœˆ22æ—¥*


### æ–°çš„é—®é¢˜
2026å¹´1æœˆ10æ—¥ä¸Šåˆ10ç‚¹å·¦å³å®éªŒå®¤æ–­ç”µï¼ŒæœåŠ¡å™¨ç»å†äº†æ–­ç”µé‡å¯ï¼Œè¿›è€Œå‘ç°äº†é—®é¢˜ã€‚
```text
è¾“å‘½ä»¤æ€»ä¼šæŠ¥é”™ï¼ŒERROR: ld.so: object '/usr/local/lib/libcrypt.so' from /etc/ld.so.preload cannot be preloaded (cannot open shared object file): ignored.
```
**åˆ†æï¼š** é€šè¿‡ top å‘½ä»¤ç›‘æ§è¿›ç¨‹ï¼Œå‘ç°æœ‰ä¸€ä¸ªåä¸º sshd è¿›ç¨‹ï¼Œè¿›ä¸€æ­¥æŸ¥çœ‹è¿›ç¨‹å·è¯¦æƒ…ï¼Œæœ‰ä¸€ä¸ª /var/log/sshd è„šæœ¬å¯åŠ¨äº†ä¸€ä¸ª python.service æœåŠ¡ï¼Œä¼ªè£…æˆ /usr/sshd çš„è„šæœ¬å¯åŠ¨ï¼Œè‡ªåŠ¨å‘ /etc/ld.so.preload é‡Œé…ç½® /usr/local/lib/libcrypt.soï¼Œæ¯æ¬¡æ‰§è¡Œå‘½ä»¤éƒ½ä¼šè‡ªåŠ¨è§¦å‘ libcrypt.so çš„åŠ è½½â€¦â€¦è€Œä¸”è¿˜ä¼šè‡ªåŠ¨é…ç½®å®šæ—¶ä»»åŠ¡ã€‚

**è§£å†³ï¼š** 
```bash
sudo chattr -i /etc/ld.so.preload # ä½¿ /etc/ld.so.preload æ–‡ä»¶å¯å†™
echo -n | sudo tee /etc/ld.so.preload # å°† /etc/ld.so.preload æ–‡ä»¶æ¸…ç©º
sudo chattr +i /etc/ld.so.preload # ä½¿ /etc/ld.so.preload æ–‡ä»¶ä¸å¯å†™ï¼ˆé”å®šæ–‡ä»¶ï¼‰
sudo chattr -i /var/spool/cron/crontabs/root # è§£é” crontab æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
sudo crontab -r # åˆ é™¤å®šæ—¶ä»»åŠ¡
```
ä¾æ¬¡é€šè¿‡å¦‚ä¸‹å‘½ä»¤ï¼Œé€æ­¥å®šä½é—®é¢˜ï¼š
1. 
```bash
$ sudo ls -l /proc/1937/exe
lrwxrwxrwx 1 root root 0  1æœˆ 11 07:07 /proc/1937/exe -> /var/log/sshd
```
è¿™è¯´æ˜ï¼ˆBy Qwenï¼‰ï¼š
- PID 1937 çš„â€œsshdâ€è¿›ç¨‹ï¼Œå…¶çœŸå®å¯æ‰§è¡Œæ–‡ä»¶ä½äº /var/log/sshd
- è€Œ /var/log/ æ˜¯ç³»ç»Ÿæ—¥å¿—ç›®å½•ï¼Œç»ä¸åº”è¯¥å­˜æ”¾å¯æ‰§è¡Œç¨‹åºï¼
- æ”»å‡»è€…æ•…æ„å°†æ¶æ„ç¨‹åºæ”¾åœ¨ /var/log/ ä¸‹ï¼Œæ˜¯ä¸ºäº†ä¼ªè£…æˆæ—¥å¿—æ–‡ä»¶ã€é€ƒé¿æ£€æµ‹

éœ€è¦æ‰§è¡Œå‘½ä»¤ï¼š
```bash
sudo kill -9 1937ï¼ˆä» top å‘½ä»¤ä¸­è·å– PIDï¼‰ # ç»ˆæ­¢æ¶æ„è¿›ç¨‹
sudo rm -f /var/log/sshd # åˆ é™¤æ¶æ„å¯æ‰§è¡Œæ–‡ä»¶
```

2. 
```bash
sudo find / -type f -name "sshd" -executable 2>/dev/null | grep -v "/usr/sbin/sshd" # å…¨å±€æœç´¢æ‰€æœ‰åä¸º sshd çš„å¯æ‰§è¡Œæ–‡ä»¶
```
æ‰¾åˆ°äº†ä¸¤ä¸ªéæ ‡å‡†è·¯å¾„çš„å¯æ‰§è¡Œ sshd æ–‡ä»¶ï¼š
```bash
/usr/bin/sshd
/var/log.old/sshd
```
éœ€è¦æ‰§è¡Œå‘½ä»¤ï¼š
```bash
sudo pkill -f "/usr/bin/sshd"
sudo pkill -f "/var/log.old/sshd"
sudo rm -f /usr/bin/sshd /var/log.old/sshd # åˆ é™¤æ¶æ„å¯æ‰§è¡Œæ–‡ä»¶
```

3.
```bash
$ grep -r "/usr/bin/sshd" /etc /lib/systemd /usr/lib/systemd 2>/dev/null
/etc/systemd/system/python.service:ExecStart=/usr/bin/sshd -sshd
```
Qwenï¼š
- è¿™è¯´æ˜ï¼šğŸš¨ ç³»ç»Ÿä¸­å­˜åœ¨ä¸€ä¸ªåä¸º python.service çš„ systemd æœåŠ¡ï¼Œå®ƒåœ¨å¯åŠ¨æ—¶æ‰§è¡Œ /usr/bin/sshd -sshd â€”â€” è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„æ¶æ„æŒä¹…åŒ–åé—¨ï¼

éœ€è¦æ‰§è¡Œå‘½ä»¤ï¼š
```bash
sudo systemctl stop python.service
sudo systemctl disable python.service
sudo rm -f /etc/systemd/system/python.service
sudo systemctl daemon-reload
```

---
æ–‡æ¡£æ›´æ–°æ—¶é—´ï¼š2026å¹´1æœˆ11æ—¥